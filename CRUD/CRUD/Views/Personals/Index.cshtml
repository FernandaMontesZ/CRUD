@model IEnumerable<CRUD.Models.Personal>


@{
    ViewBag.Title = "Información";
}
<h2>@ViewBag.Title.</h2>
<h3>@ViewBag.Message</h3>

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Información</title>
</head>
<body>
    <p>
        @Html.ActionLink("Crear Nuevo", "Create")
    </p>
    <div class="form-group">
        @*boton actualizar*@
        <div class="col-md-offset-2 col-md-10">
            <input id="btn_Read" onclick="ReadData();" type="button" value="Actualizar" class="btn btn-default" />
        </div>

    </div>
    <table id="tblPersonal" class="table">
        <thead>

            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Nombre)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ApePaterno)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ApeMaterno)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Edad)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.IsActive)
                </th>
                <th></th>
            </tr>

        </thead>

        <tbody class="tbody">

        </tbody>
        @*@foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Nombre)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ApePaterno)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ApeMaterno)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Edad)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.IsActive)
                </td>
                <td>
                    @Html.ActionLink("Editar", "Edit", new { id = item.ID_personal }) |
                    @Html.ActionLink("Detalles", "Details", new { id = item.ID_personal }) |
                    @Html.ActionLink("Eliminar", "Delete", new { id = item.ID_personal })
                </td>
            </tr>
        }*@

    </table>

    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/Scripts/jquery-3.4.1.js"></script>
    <script src="~/Scripts/bootstrap.js"></script>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <script>
        function ReadData() {
            $(document).ready(function () {
                $('#btn_Read').click(function () {
                    $.ajax({
                        type: "GET",
                        url: '/Personals/ReadListaPersonal',
                        success: function (result) {
                            var html = '';
                            $.each(result, function (key, item) {
                                html += '<tr>';
                                html += '<td>' + item.ID_personal + '</td>';
                                html += '<td>' + item.Nombre + '</td>';
                                html += '<td>' + item.ApePaterno + '</td>';
                                html += '<td>' + item.ApeMaterno + '</td>';
                                html += '<td>' + item.Edad + '</td>';
                                html += '<td>' + item.IsActive + '</td>';
                                html += '<td><a onclick=return getbyID(' + item.ID_personal + ')">Editar</a> | <a onclick="Delele(' + item.ID_personal + ')">Eliminar</a></td>';
                                html += '</tr>';
                            });

                            $('.tbody').html(html);

                        },

                        error: function () {

                            console.log("error");

                        }

                    });

                });

            });

        }



        function getbyID(ID_personal) {

            $.ajax({
                url: "/Personals/getbyID/" + ID_personal,
                typr: "GET",
                contentType: "application/json;charset=UTF-8",
                dataType: "json",
                success: function (result) {
                    $('#PerNombre').val(result.Nombre);
                    $('#PerApePa').val(result.ApePaterno);
                    $('#PerApeMa').val(result.ApeMaterno);
                    $('#PerEdad').val(result.Edad);
                    $('#PerIsActive').val(result.IsActive);
                    console.log("datos a editar");
                },

                error: function (errormessage) {
                    console.log("Error")
                }

            });

            return false;

        }  
    </script>
</body>
</html>
